<!DOCTYPE html>
<html>
<head>
    <script src="phaser.js"></script>
    <meta charset="utf-8"> 
    <title>Zygosphere game</title>
</head>
<body>

    <script>
    var config = {
        type: Phaser.AUTO,
        width: 1080,
        height: 768,
        physics: {
            default: 'arcade',
            arcade: {
                gravity: { y: 0 }
            }
        },
        scene: {
            preload: preload,
            create: create,
            update: update
        }
    };

    var game = new Phaser.Game(config);
    var turtle;
    var goal;
    var accelerate = false;

    function preload ()
    {
        this.load.image('turtle', 'assets/turtle.svg');
        this.load.image('goal', 'assets/goal.svg');
        this.cameras.main.backgroundColor.setTo(131,112,201); 
    }

    function create ()
    {
        turtle = this.physics.add.image(400, 300, 'turtle');
        turtle.setScale(0.2);
        turtle.setBounce(0.2);
        turtle.setDrag(300);
        turtle.setAngularDrag(400);
        turtle.setMaxVelocity(600);
        turtle.setCollideWorldBounds(true);

        goal = this.physics.add.image(700, 700, 'goal');
        goal.setScale(0.5);
        this.physics.add.overlap(turtle, goal, reachedGoal, null, this);
        
        this.input.on('pointerdown', function (pointer) {
            moveTo(pointer);
            accelerate = true;
        }, this);

        this.input.on('pointerup', function (pointer) {
            turtle.setAcceleration(0, 0);
            accelerate = false;
        }, this);

        this.input.on('pointermove', function (pointer) {
            turtle.rotation = Phaser.Math.Angle.Between(turtle.x, turtle.y, pointer.x, pointer.y);
            if (accelerate) {
                moveTo(pointer);
            }
        });
    }

    function moveTo(pointer) {
        let x = pointer.x - turtle.x;
        let y = pointer.y - turtle.y;
        turtle.setAcceleration(x, y);
    }

    function update() {
    }

    function reachedGoal() {
        console.log("jaja");
    }
    </script>

</body>
</html>
